<% if @search.errors.any? %>
  <div class="results-overview card text-center">
    <%= render 'shared/error_messages', object: @search %>
  </div>
<% elsif @compatibility_search.compatible_vehicles.any? %>
  <div class="panel panel-success card cursor-pointer">
    <div data-toggle="collapse" data-parent="#accordion" href="#collapse1" class="panel-heading">
      <h4 class="panel-title">
        <%= icon(:check) %> Compatible Parts Found
        <span class="pull-right"><%= icon(:expand) %></span>
      </h4>
    </div>
    <div id="collapse1" class="panel-collapse collapse in">
      <div class="panel-body">
        <p>There were some <%= @compatibility_search.fitment_note.try(:name) %> <%= @compatibility_search.category.name %> compatibilities found between:</p>
        <%= @compatibility_search.vehicle.to_label %>
        <p>There were total of <%= @compatibility_search.results_count %> compatible vehicles found</p>
        <p>Total Pages: <%= @compatibility_search.total_pages %></p>
        <p>Models found: <%= @compatibility_search.grouped_count %></p>
      </div>
    </div>
  </div>
  <div id="compatible-results" class="">
    <%= render 'results_list', results: @compatibility_search.vehicles %>
  </div>
  <% if @compatibility_search.can_advance_page? %>
    <div id="show-more-link" class="text-center">
      <%= link_to "Show More", find_path(@compatibility_search, page: @compatibility_search.next_page), remote: true, class: "btn btn-primary" %>
    </div>
  <% end %>
<% else %>
  <div class="results-overview card text-center">
    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
    <h2><%= icon(:times, class:"fa-2x") %></h2>
    <p>It does not appear that there were any compatibilitites found for this vehicle.</p>
    <p>Try again?</p>
  </div>
<% end %>
