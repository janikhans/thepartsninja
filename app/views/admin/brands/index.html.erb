<% provide(:header, "Brands") %>

<div class="row">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a data-toggle="collapse" href="#new-brand">New Brand</a>
        </h4>
      </div>
      <div id="new-brand" class="panel-collapse collapse">
        <div class="panel-body">
          <%= render 'admin/brands/form' %>
        </div>
      </div>
    </div>
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          Search Brands
        </h4>
      </div>
      <div class="panel-body">
        <%= form_tag admin_brands_path, method: :get, id: "search", class: "form" do %>
          <%= text_field_tag :q, params[:q], placeholder: "Search", class: "form-control" %>
        <% end %>
      </div>
    </div>
    <% if @query %>
    <div class="panel panel-default">
        <div class="panel-heading">
            Stats for <i><%= @query %> </i>
        </div>
        <div class="panel-body">
          <ul style="list-style:none;">
            <li>Results Found: <%= @brands_count %><br></li>
          </ul>
        </div>
    </div>
    <% end %>
  </div>
  <div class="col-lg-12">
      <div class="panel panel-default">
          <div class="panel-heading">
              Showing all Brands
          </div>
          <div class="panel-body">
              <div class="dataTable_wrapper">
                  <table width="100%" class="table table-striped table-bordered table-hover" id="dataTables-brands">
                      <thead>
                          <tr>
                              <th>Name</th>
                              <th>Website</th>
                              <th></th>
                              <th></th>
                          </tr>
                      </thead>
                      <tbody>
                          <%= render partial: 'admin/brands/brand', collection: @brands %>
                      </tbody>
                  </table>
              </div>
              <%= paginate @brands %>
          </div>
      </div>
  </div>
</div>

<script>
  $(document).ready(function() {
      $('#dataTables-brands').DataTable({
        responsive: true,
        "aaSorting": [],
        "paging": false,
      });
  });
</script>
